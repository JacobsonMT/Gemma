<project xmlns:ant="jelly:ant"
         xmlns:maven="jelly:maven">

 <preGoal name="java:compile">
    <mkdir dir="${maven.xdoclet.hibernatedoclet.destDir}"/>
    <attainGoal name="xdoclet:hibernatedoclet"/>
  </preGoal>
  
<preGoal name="java:jar-resources">
    <echo message="${maven.build.dest}"/>
    <copy todir="${maven.build.dest}">
      <fileset dir="${maven.xdoclet.hibernatedoclet.destDir}"/>
    </copy>
</preGoal>

<goal name="mda" >
		<maven:maven descriptor="${basedir}/mda/project.xml"
			goals="andromda:run"/>
</goal>	

<!--
<postGoal name="mda">
	<attainGoal name="patch-applicationContext" />
</postGoal>
-->

<goal name="mda-clean" description="Remove all Andromda-generated files (except permanent impl classes)" >
	 <ant:delete>
	 	<fileset dir="src/gen/edu/columbia" includes="**/*.java,**/*.hbm.xml"  excludes="impl/**/*.java" />
	 </ant:delete>
</goal>


<goal name="mda-pojo-impl-clean" description="Remove all Andromda-generated impl files" >
	 <ant:delete>
	 	<fileset dir="src/impl/edu/columbia/gemma" includes="**/*.java" excludes="**/*DaoImpl.java,**/*ServiceImpl.java,**/util/*,**/loader" />
	 </ant:delete>
</goal>

</project>
