#!/usr/bin/perl
use strict;
# given a GEO SOFT file, remove all but selected probe ids. This is used to make files for testing.

# todo: make this customizeable outside code.
my %keepers = (
	       "31307_at" => 1,
	       "31308_at" => 1,
	       "31309_r_at" => 1,
	       "31310_at" => 1,
	       "31311_at" => 1,
	       "31312_at" => 1,
	       "31313_at" => 1,
	       "31314_at" => 1,
	       "31315_at" => 1,
	       "31316_at" => 1,
	       "31317_r_at" => 1,
	       "31318_at" => 1,
	       "31319_at" => 1,
	       "31320_at" => 1,
	       "31321_at" => 1,
	       "31322_at" => 1,
	       "200938_s_at" => 1,
	       "200939_s_at" => 1,
	       "200940_s_at" => 1,
	       "200941_at" => 1,
	       "200942_s_at" => 1,
	       "200943_at" => 1,
	       "200944_s_at" => 1,
	       "200945_s_at" => 1,
	       "200946_x_at" => 1,
	       "200947_s_at" => 1,
	       "200948_at" => 1,
	       "200949_x_at" => 1,
	       "200950_at" => 1,
	       "200951_s_at" => 1,
	       "224416_s_at" => 1,
	       "224417_at" => 1,
	       "224418_x_at" => 1,
	       "224419_x_at" => 1,
	       "224421_x_at" => 1,
	       "224422_x_at" => 1,
	       "224423_x_at" => 1,
	       "224424_x_at" => 1,
	       "224425_x_at" => 1,
	       "224426_s_at" => 1,
	       "224427_s_at" => 1,
	       "224428_s_at" => 1,
	       "224429_x_at" => 1,
	       "224430_s_at" => 1,
	       "224431_s_at" => 1,
	       "224432_at" => 1,
	       "224433_s_at" => 1,
	       "224434_s_at" => 1,
	       "224435_at" => 1,
	       "224436_s_at" => 1,
	       "224437_s_at" => 1,
	       "224438_at" => 1,
	       "224439_x_at" => 1,
	       "224441_s_at" => 1,
	       "224442_at" => 1,
	       "224443_at" => 1,
	       "224444_s_at" => 1,
	       "224445_s_at" => 1,
	       "224446_at" => 1,
	       "224447_s_at" => 1,
	       "224448_s_at" => 1,
	       "224449_at" => 1,
	       "224450_s_at" => 1,
	       "224451_x_at" => 1,
	       "224452_s_at" => 1,
	       "224453_s_at" => 1,
	       "224454_at" => 1,
	       "224455_s_at" => 1,
	       "224456_s_at" => 1,
	       "224457_at" => 1,
	       "224458_at" => 1,
	       "224459_at" => 1,
	       "224460_s_at" => 1,
	       "224461_s_at" => 1,
	       "224462_s_at" => 1,
	       "224463_s_at" => 1,
	       "224464_s_at" => 1,
	       "224465_s_at" => 1,
	       "224466_s_at" => 1,
	       "224467_s_at" => 1,
	       "224468_s_at" => 1,
	       "224469_s_at" => 1,
	       "224470_at" => 1,
	       "224471_s_at" => 1,
	       "224472_x_at" => 1,
	       "224473_x_at" => 1,
	       "224474_x_at" => 1,
	       "224475_at" => 1,
	       "224476_s_at" => 1,
	       "224477_s_at" => 1,
	       "224478_s_at" => 1,
	       "224479_s_at" => 1,
	       "224480_s_at" => 1,
	       "224481_s_at" => 1,
	       "224482_s_at" => 1,
	       "224483_s_at" => 1,
	       "224484_s_at" => 1,
	       "224485_s_at" => 1,
	       "224486_s_at" => 1,
	       "224487_at" => 1,
	       "224488_s_at" => 1,
	       "224489_at" => 1,
	       "224490_s_at" => 1,
	       "224491_at" => 1,
	       "224492_s_at" => 1,
	       "224493_x_at" => 1,
	       "224494_x_at" => 1,
	       "224495_at" => 1,
	       "224496_s_at" => 1,
	       "224497_x_at" => 1,
	       "224498_x_at" => 1,
	       "224499_s_at" => 1,
	       "224500_s_at" => 1,
	       "224501_at" => 1,
	       "224502_s_at" => 1,
	       "224503_s_at" => 1,
	       "866" => 1,
	       "867" => 1,
	       "868" => 1,
	       "869" => 1,
	       "871" => 1,
	       "872" => 1,
	       "873" => 1,
	       "876" => 1,
	       "877" => 1,
	       "878" => 1,
	       "879" => 1,
	       "881" => 1,
	       "883" => 1,
	       "884" => 1,
	       "885" => 1,
	       "886" => 1,
	       "889" => 1,
	       "ID_REF" =>1,
	       "ID" =>1
	      );


while (<>) {
  if ($_=~ /^!Platform_sample_id/) {
    next;
  } elsif ($_=~ /^!Platform_series_id/) {
    next;
  } elsif ($_ =~ /[\^!\#]/) {
    print;
  } else {
    my @vals = split "\t", $_;
    if ($keepers{$vals[0]}) {
      print;
    }
  }
}

