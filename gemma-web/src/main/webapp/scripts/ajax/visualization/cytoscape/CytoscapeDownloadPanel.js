/**
 * Created with IntelliJ IDEA.
 * User: anton
 * Date: 20/03/13
 * Time: 8:02 PM
 * To change this template use File | Settings | File Templates.
 */
Ext.namespace('Gemma');

/**
 *
 *
 * @class CytoscapeDownloadWindow
 */
Gemma.CytoscapeDownloadWindow = Ext.extend(Ext.Window, {
    width: 800,
    height: 400,
    layout: 'fit',

    timeToString: function (timeStamp) {
        // Make minutes double digits.
        var min = (timeStamp.getMinutes() < 10) ? '0' + timeStamp.getMinutes() : timeStamp.getMinutes();
        return timeStamp.getFullYear() + "/" + timeStamp.getMonth() + "/" + timeStamp.getDate() + " " + timeStamp.getHours() + ":" + min;
    },

    displayXML: function (xmlString) {
        var text = '<!-- Generated by Gemma\n' + ' ' + this.timeToString(new Date()) + '\n' + ' \n' +
            String.format(Gemma.CITATION_DIRECTIONS, '\n') + ' \n' + '-->\n\n';
        this.textAreaPanel.setValue(text + xmlString);
        this.show();
    },

    initComponent: function () {
        Ext.apply(this, {
            tbar: [
                {
                    ref: 'selectAllButton',
                    xtype: 'button',
                    text: 'Select All',
                    scope: this,
                    handler: function () {
                        this.textAreaPanel.selectText();
                    }
                }
            ],
            items: [new Ext.form.TextArea({
                ref: 'textAreaPanel',
                readOnly: true,
                autoScroll: true,
                wordWrap: false
            })]
        });
        Gemma.CytoscapeDownloadWindow.superclass.initComponent.call(this);
    },

    onRender: function () {
        Gemma.CytoscapeDownloadWindow.superclass.onRender.apply(this, arguments);
    }
});